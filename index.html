<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b0f19" />
  <title>è‹±ä½œæ–‡ã‚«ãƒ¼ãƒ‰</title>

  <style>
    :root{
      --bg: #f6f7fb;
      --text: #0b0f19;
      --muted: rgba(11,15,25,.58);
      --border: rgba(15,23,42,.10);
      --card: rgba(255,255,255,.82);
      --cardSolid: #fff;
      --shadow: 0 14px 40px rgba(2,6,23,.10);
      --shadowSm: 0 8px 22px rgba(2,6,23,.10);
      --radius: 18px;
      --radiusLg: 26px;
      --pill: 999px;
      --accentText: rgba(11,15,25,.85);
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg: #0b1020;
        --text: #eef2ff;
        --muted: rgba(238,242,255,.55);
        --border: rgba(148,163,184,.16);
        --card: rgba(17,24,39,.62);
        --cardSolid: #111827;
        --shadow: 0 18px 60px rgba(0,0,0,.35);
        --shadowSm: 0 10px 34px rgba(0,0,0,.35);
        --accentText: rgba(238,242,255,.90);
      }
    }

    *{ box-sizing: border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      color: var(--text);
      background:
        radial-gradient(1200px 700px at 15% -12%, rgba(99,102,241,.20), transparent 60%),
        radial-gradient(1200px 700px at 90% 0%, rgba(14,165,233,.18), transparent 55%),
        radial-gradient(900px 600px at 40% 110%, rgba(236,72,153,.14), transparent 55%),
        var(--bg);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", sans-serif;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }

    header{
      position: sticky;
      top:0;
      z-index: 30;
      padding: 14px 14px 10px;
      border-bottom: 1px solid var(--border);
      background: rgba(255,255,255,.60);
      backdrop-filter: blur(16px);
    }
    @media (prefers-color-scheme: dark){
      header{ background: rgba(17,24,39,.45); }
    }

    h1{ margin:0; font-size: 18px; letter-spacing: -0.02em; }
    .sub{ margin: 6px 0 0; font-size: 12px; color: var(--muted); }

    .screen{ display:none; }
    .screen.show{ display:block; }

    .pillBtn{
      border: 1px solid var(--border);
      background: var(--card);
      box-shadow: var(--shadowSm);
      padding: 9px 12px;
      border-radius: var(--pill);
      font-size: 13px;
      cursor: pointer;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }
    .pillBtn:active{ transform: scale(.985); }

    .primaryBtn{
      border: 1px solid rgba(2,6,23,.12);
      background: #0b0f19;
      color: #fff;
      box-shadow: var(--shadowSm);
      padding: 11px 14px;
      border-radius: var(--pill);
      font-size: 14px;
      cursor: pointer;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }
    @media (prefers-color-scheme: dark){
      .primaryBtn{ background:#eef2ff; color:#0b1020; border-color: rgba(238,242,255,.16); }
    }
    .primaryBtn:active{ transform: scale(.985); }

    /* picker */
    .picker{ padding: 12px 14px 96px; }
    .search{
      width:100%;
      padding: 12px 14px;
      border-radius: var(--pill);
      border: 1px solid var(--border);
      background: var(--cardSolid);
      box-shadow: 0 8px 26px rgba(2,6,23,.08);
      outline: none;
      color: var(--text);
    }
    @media (prefers-color-scheme: dark){
      .search{ background: rgba(17,24,39,.70); }
    }
    .sectionTitle{
      margin: 14px 2px 8px;
      font-size: 12px;
      color: var(--muted);
      font-weight: 600;
    }
    .grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: 10px;
    }
    .themeBtn{
      border: 1px solid var(--border);
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 12px;
      text-align:left;
      cursor: pointer;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      transition: transform .12s ease;
    }
    .themeBtn:active{ transform: scale(.987); }
    .themeTitle{ margin:0 0 6px; font-size: 15px; letter-spacing:-0.01em; }
    .themeMeta{ margin:0; font-size: 12px; color: var(--muted); }

    /* top */
    .topWrap{ padding: 12px 14px 96px; display:flex; flex-direction:column; gap: 12px; }
    .panel{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radiusLg);
      box-shadow: var(--shadow);
      padding: 14px;
    }
    .row{ display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap; }
    .label{ font-size: 12px; color: var(--muted); margin-bottom: 8px; }
    .bigTheme{ font-size: 16px; letter-spacing: -0.01em; margin:0; }
    .modeGrid{ display:grid; grid-template-columns: 1fr; gap: 10px; }
    .modeBtn{
      width:100%;
      text-align:left;
      padding: 14px 14px;
      border-radius: calc(var(--radius) + 4px);
      border: 1px solid var(--border);
      background: var(--card);
      box-shadow: var(--shadowSm);
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
      user-select:none;
    }
    .modeBtn:active{ transform: scale(.99); }
    .modeTitle{ margin:0 0 4px; font-size: 15px; }
    .modeDesc{ margin:0; font-size: 12px; color: var(--muted); }
    .hint{ margin-top: 10px; font-size: 12px; color: var(--muted); }

    /* list header toolbar */
    .listToolbar{
      margin-top: 10px;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap:10px;
      flex-wrap: wrap;
    }
    .toolbarLeft{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }

    /* list */
    main{ padding: 12px 14px 96px; }
    table{ width:100%; border-collapse: separate; border-spacing: 0 10px; }
    thead{ display:none; }
    tbody td{
      background: var(--card);
      border-top: 1px solid var(--border);
      border-bottom: 1px solid var(--border);
      padding: 14px;
      vertical-align: top;
    }
    tbody td:first-child{
      border-left: 1px solid var(--border);
      border-radius: var(--radius) 0 0 var(--radius);
      cursor: pointer;
    }
    tbody td:last-child{
      border-right: 1px solid var(--border);
      border-radius: 0 var(--radius) var(--radius) 0;
      width: 92px;
      text-align: right;
    }
    .rowTop{ display:flex; align-items:flex-start; justify-content: space-between; gap: 10px; }
    .jp{ font-size: 15px; line-height: 1.45; letter-spacing: -0.01em; }
    .badge{
      font-size: 11px;
      padding: 4px 10px;
      border-radius: var(--pill);
      background: rgba(99,102,241,.22);
      border: 1px solid rgba(99,102,241,.30);
      color: var(--accentText);
      white-space: nowrap;
    }
    .audioBtn{
      border: 1px solid var(--border);
      background: var(--card);
      box-shadow: var(--shadowSm);
      padding: 10px 12px;
      border-radius: var(--pill);
      font-size: 13px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .audioBtn:active{ transform: scale(.985); }

    /* section row in list */
    .sectionRow td{
      background: transparent;
      border: none;
      padding: 4px 6px 0;
    }
    .sectionLabel{
      font-size: 12px;
      color: var(--muted);
      font-weight: 700;
      letter-spacing: -0.01em;
    }

    /* modal */
    .overlay{
      position: fixed; inset: 0;
      background: rgba(0,0,0,.35);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 16px;
      z-index: 50;
      backdrop-filter: blur(10px);
    }
    .overlay.show{ display:flex; }
    .modal{
      width: min(700px, 100%);
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radiusLg);
      overflow:hidden;
      box-shadow: var(--shadow);
    }
    .modalHead{
      padding: 12px;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      border-bottom: 1px solid var(--border);
      flex-wrap: wrap;
    }
    .leftBadges{ display:flex; gap:8px; align-items:center; flex-wrap: wrap; }
    .statusBtns{ display:flex; gap:8px; flex-wrap: wrap; }
    .sbtn{
      border: 1px solid var(--border);
      background: var(--card);
      box-shadow: var(--shadowSm);
      padding: 9px 12px;
      border-radius: var(--pill);
      font-size: 12px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .sbtn:active{ transform: scale(.985); }
    .sbtn.active{
      background: #0b0f19; color:#fff;
      border-color: rgba(2,6,23,.2);
    }
    @media (prefers-color-scheme: dark){
      .sbtn.active{ background:#eef2ff; color:#0b1020; border-color: rgba(238,242,255,.16); }
    }

    .cardArea{
      padding: 18px 14px 16px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .big,.en{ margin:0; font-size: 20px; line-height: 1.45; letter-spacing: -0.015em; }
    .en{ margin:0 0 12px; }
    .ipa{ margin:0; font-size: 16px; color: var(--muted); }

    .modalFoot{
      padding: 12px;
      border-top: 1px solid var(--border);
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
    }
    .ghost{ font-size: 12px; color: var(--muted); }

    /* Study (swipe) */
    .studyWrap{ padding: 14px 14px 96px; }
    .studyTop{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }
    .studyHint{ margin: 8px 0 0; font-size: 12px; color: var(--muted); }
    .deck{
      margin-top: 14px;
      height: min(58vh, 520px);
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .studyCard{
      width: min(560px, 100%);
      height: 100%;
      border-radius: calc(var(--radiusLg) + 4px);
      background: var(--card);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      padding: 18px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      touch-action: none;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      transition: transform .18s ease;
    }
    .jpBig{ margin:0; font-size: 22px; line-height: 1.45; letter-spacing:-0.015em; }
    .enBig{ margin:0 0 12px; font-size: 22px; line-height: 1.45; letter-spacing:-0.015em; }
    .ipaBig{ margin:0; font-size: 16px; color: var(--muted); }

    .actions{
      margin-top: 14px;
      display:flex;
      justify-content:center;
      gap: 10px;
    }
    .actionBtn{
      width: 54px; height: 54px;
      border-radius: var(--pill);
      border: 1px solid var(--border);
      background: var(--card);
      box-shadow: var(--shadowSm);
      font-size: 18px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .actionBtn:active{ transform: scale(.985); }

    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
  </style>
</head>

<body>
<header>
  <h1 id="title">è‹±ä½œæ–‡ã‚«ãƒ¼ãƒ‰</h1>
  <div class="sub" id="subtitle">ãƒˆãƒƒãƒ—</div>

  <div class="listToolbar" id="listToolbar" style="display:none;">
    <div class="toolbarLeft">
      <button class="pillBtn" id="listBackTopBtn">â† ãƒˆãƒƒãƒ—</button>
    </div>
  </div>
</header>

<!-- TOP -->
<section class="screen show" id="screenTop">
  <div class="topWrap">
    <div class="panel">
      <div class="label">ãƒ†ãƒ¼ãƒ</div>
      <div class="row">
        <p class="bigTheme" id="selectedThemeText">æœªé¸æŠ</p>
        <button class="primaryBtn" id="goThemeSelectBtn">ãƒ†ãƒ¼ãƒã‚’é¸æŠ</button>
      </div>
      <div class="hint" id="progressHint">æœªå­¦ç¿’: 0 / æ›–æ˜§: 0 / è¦šãˆãŸ: 0</div>
    </div>

    <div class="panel">
      <div class="label">ãƒ¢ãƒ¼ãƒ‰</div>
      <div class="modeGrid">
        <button class="modeBtn" id="modeSwipeJpBtn">
          <p class="modeTitle">ã‚¹ãƒ¯ã‚¤ãƒ—ï¼ˆæ—¥æœ¬èªï¼‰</p>
          <p class="modeDesc">å³=è¦šãˆãŸ / å·¦=è¦šãˆã¦ã„ãªã„ / ä¸Š=æ›–æ˜§</p>
        </button>

        <button class="modeBtn" id="modeSwipeAudioBtn">
          <p class="modeTitle">ã‚¹ãƒ¯ã‚¤ãƒ—ï¼ˆéŸ³å£°ï¼‰</p>
          <p class="modeDesc">éŸ³å£°ã‹ã‚‰é–‹å§‹ï¼ˆğŸ”ˆã‚’æŠ¼ã—ã¦å†ç”Ÿï¼‰</p>
        </button>

        <button class="modeBtn" id="modeListBtn">
          <p class="modeTitle">ä¸€è¦§é¸æŠ</p>
          <p class="modeDesc">æ—¥æœ¬èªï¼‹ğŸ”ˆ â†’ ã‚¿ãƒƒãƒ—ã§ã‚«ãƒ¼ãƒ‰ï¼ˆè‹±èªï¼‹IPAï¼‰</p>
        </button>
      </div>

      <div class="hint" id="topHint">ãƒ¢ãƒ¼ãƒ‰ã‚’é¸ã‚“ã§é–‹å§‹ã€‚</div>
    </div>
  </div>
</section>

<!-- THEME PICKER -->
<section class="screen" id="screenPicker">
  <div class="picker">
    <div class="row" style="margin-bottom:10px;">
      <button class="pillBtn" id="pickerBackTopBtn">â† ãƒˆãƒƒãƒ—</button>
      <span class="badge mono" id="pickerCount">0 themes</span>
    </div>

    <input class="search" id="themeSearch" placeholder="ãƒ†ãƒ¼ãƒæ¤œç´¢ï¼ˆä¾‹ï¼šè‡ªå·±ç´¹ä»‹ã€ç¿’æ…£â€¦ï¼‰" />

    <div class="sectionTitle">æœ€è¿‘ä½¿ã£ãŸ</div>
    <div class="grid" id="recentGrid"></div>

    <div class="sectionTitle">ã™ã¹ã¦ã®ãƒ†ãƒ¼ãƒ</div>
    <div class="grid" id="themeGrid"></div>
  </div>
</section>

<!-- LIST -->
<section class="screen" id="screenTheme">
  <main>
    <table>
      <tbody id="tbody"></tbody>
    </table>
  </main>
</section>

<!-- STUDY -->
<section class="screen" id="screenStudy">
  <div class="studyWrap">
    <div class="studyTop">
      <button class="pillBtn" id="studyBackTopBtn">â† ãƒˆãƒƒãƒ—</button>
      <span class="badge mono" id="studyCounter">0 / 0</span>
      <button class="audioBtn" id="studyAudioBtn">â–¶ï¸</button>
    </div>
    <div class="studyHint" id="studyHint">ã‚¹ãƒ¯ã‚¤ãƒ—ï¼šå³=è¦šãˆãŸ / å·¦=è¦šãˆã¦ã„ãªã„ / ä¸Š=æ›–æ˜§</div>

    <div class="deck">
      <div class="studyCard" id="studyCard"></div>
    </div>

    <div class="actions">
      <button class="actionBtn" id="actionUnknown">âœ•</button>
      <button class="actionBtn" id="actionAmbiguous">ã€œ</button>
      <button class="actionBtn" id="actionKnown">âœ“</button>
    </div>
  </div>
</section>

<!-- MODAL -->
<div class="overlay" id="overlay" role="dialog" aria-modal="true">
  <div class="modal">
    <div class="modalHead">
      <div class="leftBadges">
        <span class="badge" id="modalBadge">---</span>
        <span class="badge" id="modalTheme">---</span>
      </div>
      <div class="statusBtns" id="statusBtns"></div>
      <button class="pillBtn" id="closeBtn">é–‰ã˜ã‚‹</button>
    </div>

    <div class="cardArea" id="cardArea"></div>

    <div class="modalFoot">
      <button class="audioBtn" id="modalAudioBtn">â–¶ï¸ å†ç”Ÿ</button>
      <div class="ghost">ã‚«ãƒ¼ãƒ‰é¢ã‚¿ãƒƒãƒ—ã§è¡¨â‡„è£</div>
    </div>
  </div>
</div>

<script src="./app.js"></script>
</body>
</html>
