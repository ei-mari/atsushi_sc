<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b0f19" />
  <title>英作文カード</title>

  <style>
    :root{
      --bg:#f6f7fb; --text:#0b0f19; --muted:rgba(11,15,25,.58);
      --border:rgba(15,23,42,.10); --card:rgba(255,255,255,.82);
      --shadow:0 14px 40px rgba(2,6,23,.10); --shadowSm:0 8px 22px rgba(2,6,23,.10);
      --radius:18px; --radiusLg:26px; --pill:999px;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg:#0b1020; --text:#eef2ff; --muted:rgba(238,242,255,.55);
        --border:rgba(148,163,184,.16); --card:rgba(17,24,39,.62);
        --shadow:0 18px 60px rgba(0,0,0,.35); --shadowSm:0 10px 34px rgba(0,0,0,.35);
      }
    }
    *{box-sizing:border-box;}
    body{
      margin:0; color:var(--text);
      background:
        radial-gradient(1200px 700px at 15% -12%, rgba(99,102,241,.20), transparent 60%),
        radial-gradient(1200px 700px at 90% 0%, rgba(14,165,233,.18), transparent 55%),
        radial-gradient(900px 600px at 40% 110%, rgba(236,72,153,.14), transparent 55%),
        var(--bg);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", sans-serif;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }
    header{
      position:sticky; top:0; z-index:30;
      padding:14px 14px 10px;
      border-bottom:1px solid var(--border);
      background: rgba(255,255,255,.60);
      backdrop-filter: blur(16px);
    }
    @media (prefers-color-scheme: dark){
      header{ background: rgba(17,24,39,.45); }
    }
    h1{margin:0; font-size:18px; letter-spacing:-0.02em;}
    .sub{margin:6px 0 0; font-size:12px; color:var(--muted);}

    .tabsTop{ margin-top:10px; display:flex; gap:8px; flex-wrap:wrap; }
    .tab{
      border:1px solid var(--border);
      background: var(--card);
      box-shadow: var(--shadowSm);
      padding:9px 12px;
      border-radius: var(--pill);
      font-size:13px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .tab.active{ background:#0b0f19; color:#fff; border-color: rgba(2,6,23,.2); }
    @media (prefers-color-scheme: dark){
      .tab.active{ background:#eef2ff; color:#0b1020; border-color: rgba(238,242,255,.16); }
    }
    .tab:active{ transform: scale(.985); }

    .screen{ display:none; }
    .screen.show{ display:block; }

    /* buttons */
    .pillBtn{
      border:1px solid var(--border);
      background: var(--card);
      box-shadow: var(--shadowSm);
      padding:9px 12px;
      border-radius: var(--pill);
      font-size:13px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .pillBtn:active{ transform: scale(.985); }

    .primaryBtn{
      border:1px solid rgba(2,6,23,.12);
      background:#0b0f19;
      color:#fff;
      box-shadow: var(--shadowSm);
      padding:11px 14px;
      border-radius: var(--pill);
      font-size:14px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    @media (prefers-color-scheme: dark){
      .primaryBtn{ background:#eef2ff; color:#0b1020; border-color: rgba(238,242,255,.16); }
    }
    .primaryBtn:active{ transform: scale(.985); }

    /* top layout */
    .wrap{ padding:12px 14px 96px; display:flex; flex-direction:column; gap:12px; }
    .panel{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radiusLg);
      box-shadow: var(--shadow);
      padding:14px;
    }
    .label{ font-size:12px; color:var(--muted); margin-bottom:8px; }
    .row{ display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap; }
    .bigTheme{ margin:0; font-size:16px; letter-spacing:-0.01em; }
    .hint{ margin-top:10px; font-size:12px; color:var(--muted); }

    /* picker */
    .picker{ padding:12px 14px 96px; }
    .search{
      width:100%;
      padding:12px 14px;
      border-radius: var(--pill);
      border:1px solid var(--border);
      background: rgba(255,255,255,.85);
      box-shadow: 0 8px 26px rgba(2,6,23,.08);
      outline:none;
      color:var(--text);
    }
    @media (prefers-color-scheme: dark){
      .search{ background: rgba(17,24,39,.70); }
    }
    .sectionTitle{ margin:14px 2px 8px; font-size:12px; color:var(--muted); font-weight:600; }
    .grid{ display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:10px; }
    .themeBtn{
      border:1px solid var(--border);
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:12px;
      text-align:left;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .themeBtn:active{ transform: scale(.987); }
    .themeTitle{ margin:0 0 6px; font-size:15px; letter-spacing:-0.01em; }
    .themeMeta{ margin:0; font-size:12px; color:var(--muted); }

    /* list */
    main{ padding:12px 14px 96px; }
    table{ width:100%; border-collapse:separate; border-spacing:0 10px; }
    thead{ display:none; }
    tbody td{
      background: var(--card);
      border-top:1px solid var(--border);
      border-bottom:1px solid var(--border);
      padding:14px;
      vertical-align:top;
    }
    tbody td:first-child{
      border-left:1px solid var(--border);
      border-radius: var(--radius) 0 0 var(--radius);
      cursor:pointer;
    }
    tbody td:last-child{
      border-right:1px solid var(--border);
      border-radius: 0 var(--radius) var(--radius) 0;
      width:92px;
      text-align:right;
    }
    .rowTop{ display:flex; align-items:flex-start; justify-content:space-between; gap:10px; }
    .jp{ font-size:15px; line-height:1.45; letter-spacing:-0.01em; }
    .badge{
      font-size:11px;
      padding:4px 10px;
      border-radius: var(--pill);
      background: rgba(99,102,241,.22);
      border:1px solid rgba(99,102,241,.30);
      color: rgba(11,15,25,.85);
      white-space:nowrap;
    }
    @media (prefers-color-scheme: dark){
      .badge{ color: rgba(238,242,255,.90); }
    }
    .audioBtn{
      border:1px solid var(--border);
      background: var(--card);
      box-shadow: var(--shadowSm);
      padding:10px 12px;
      border-radius: var(--pill);
      font-size:13px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .audioBtn:active{ transform: scale(.985); }

    /* modal */
    .overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,.35);
      display:none;
      align-items:center;
      justify-content:center;
      padding:16px;
      z-index:50;
      backdrop-filter: blur(10px);
    }
    .overlay.show{ display:flex; }
    .modal{
      width:min(700px, 100%);
      background: var(--card);
      border:1px solid var(--border);
      border-radius: var(--radiusLg);
      overflow:hidden;
      box-shadow: var(--shadow);
    }
    .modalHead{
      padding:12px;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap:10px;
      border-bottom:1px solid var(--border);
      flex-wrap:wrap;
    }
    .leftBadges{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    .statusBtns{ display:flex; gap:8px; flex-wrap:wrap; }
    .sbtn{
      border:1px solid var(--border);
      background: var(--card);
      box-shadow: var(--shadowSm);
      padding:9px 12px;
      border-radius: var(--pill);
      font-size:12px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .sbtn.active{ background:#0b0f19; color:#fff; border-color: rgba(2,6,23,.2); }
    @media (prefers-color-scheme: dark){
      .sbtn.active{ background:#eef2ff; color:#0b1020; border-color: rgba(238,242,255,.16); }
    }
    .cardArea{ padding:18px 14px 16px; cursor:pointer; user-select:none; -webkit-tap-highlight-color: transparent; }
    .big,.en{ margin:0; font-size:20px; line-height:1.45; letter-spacing:-0.015em; }
    .en{ margin:0 0 12px; }
    .ipa{ margin:0; font-size:16px; color:var(--muted); }
    .modalFoot{
      padding:12px;
      border-top:1px solid var(--border);
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap:10px;
    }
    .ghost{ font-size:12px; color:var(--muted); }

    /* study */
    .studyWrap{ padding:12px 14px 96px; }
    .studyTop{ display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap; }
    .deck{ margin-top:14px; height:min(58vh, 520px); display:flex; align-items:center; justify-content:center; }
    .studyCard{
      width:min(560px, 100%);
      height:100%;
      border-radius: calc(var(--radiusLg) + 4px);
      background: var(--card);
      border:1px solid var(--border);
      box-shadow: var(--shadow);
      padding:18px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      touch-action:none;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      transition: transform .18s ease;
    }
    .enBig{ margin:0 0 12px; font-size:22px; line-height:1.45; letter-spacing:-0.015em; }
    .ipaBig{ margin:0; font-size:16px; color:var(--muted); }
    .tapHint{ margin-top:10px; font-size:12px; color:var(--muted); }
    .actions{ margin-top:14px; display:flex; justify-content:center; gap:10px; }
    .actionBtn{
      width:54px; height:54px;
      border-radius: var(--pill);
      border:1px solid var(--border);
      background: var(--card);
      box-shadow: var(--shadowSm);
      font-size:18px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .actionBtn:active{ transform: scale(.985); }

    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
  </style>
</head>

<body>
<header>
  <h1>英作文カード</h1>
  <div class="sub" id="subtitle">トップ</div>

  <div class="tabsTop">
    <button class="tab active" id="tabTop">トップ</button>
    <button class="tab" id="tabList">一覧</button>
  </div>
</header>

<!-- TOP -->
<section class="screen show" id="screenTop">
  <div class="wrap">
    <div class="panel">
      <div class="label">テーマ</div>
      <div class="row">
        <p class="bigTheme" id="selectedThemeText">未選択</p>
        <button class="primaryBtn" id="goThemeSelectBtn">テーマ選択</button>
      </div>
      <div class="hint" id="topHint">テーマを選んでください。</div>
    </div>

    <div class="panel">
      <div class="label">スワイプモード（音声）</div>
      <button class="primaryBtn" id="startSwipeAudioBtn" style="width:100%;">開始</button>
      <div class="hint">右=覚えた / 左=覚えていない / 上=曖昧</div>
    </div>
  </div>
</section>

<!-- THEME PICKER -->
<section class="screen" id="screenPicker">
  <div class="picker">
    <div class="row" style="margin-bottom:10px;">
      <button class="pillBtn" id="pickerBackBtn">← 戻る</button>
      <span class="badge mono" id="pickerCount">0 themes</span>
    </div>

    <input class="search" id="themeSearch" placeholder="テーマ検索（例：自己紹介、習慣…）" />

    <div class="sectionTitle">最近使った</div>
    <div class="grid" id="recentGrid"></div>

    <div class="sectionTitle">すべてのテーマ</div>
    <div class="grid" id="themeGrid"></div>
  </div>
</section>

<!-- LIST -->
<section class="screen" id="screenList">
  <main>
    <table>
      <thead><tr><th>日本語</th><th>音声</th></tr></thead>
      <tbody id="tbody"></tbody>
    </table>
  </main>
</section>

<!-- STUDY (audio only front) -->
<section class="screen" id="screenStudy">
  <div class="studyWrap">
    <div class="studyTop">
      <button class="pillBtn" id="studyBackBtn">← 戻る</button>
      <span class="badge mono" id="studyCounter">0 / 0</span>
      <button class="audioBtn" id="studyAudioBtn">▶︎</button>
    </div>

    <div class="deck">
      <div class="studyCard" id="studyCard"></div>
    </div>

    <div class="actions">
      <button class="actionBtn" id="actionUnknown">✕</button>
      <button class="actionBtn" id="actionAmbiguous">〜</button>
      <button class="actionBtn" id="actionKnown">✓</button>
    </div>
  </div>
</section>

<!-- MODAL -->
<div class="overlay" id="overlay" role="dialog" aria-modal="true">
  <div class="modal">
    <div class="modalHead">
      <div class="leftBadges">
        <span class="badge" id="modalBadge">---</span>
        <span class="badge" id="modalTheme">---</span>
      </div>
      <div class="statusBtns" id="statusBtns"></div>
      <button class="pillBtn" id="closeBtn">閉じる</button>
    </div>

    <div class="cardArea" id="cardArea"></div>

    <div class="modalFoot">
      <button class="audioBtn" id="modalAudioBtn">▶︎ 再生</button>
      <div class="ghost">カード面タップで表⇄裏</div>
    </div>
  </div>
</div>

<script src="./app.js"></script>
</body>
</html>
